DROP TABLE Orders;
DROP TABLE Flights;
DROP TABLE Aircrafts;
DROP TABLE Cities;
DROP TABLE Companies; 

CREATE TABLE Cities (
      id_City        BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 30, INCREMENT BY 1, CACHE 20),
      name_City      VARCHAR(20) NOT NULL,
      PRIMARY KEY    (id_City)
);

CREATE TABLE Companies (
      id_Company     BIGINT NOT NULL,
      name_Company   VARCHAR(20) NOT NULL,
      PRIMARY KEY    (id_Company)      	
);

CREATE TABLE Aircrafts (
       id_Aircraft          BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 30, INCREMENT BY 1, CACHE 20),
       id_Company           BIGINT NOT NULL,
       model                VARCHAR(20) NOT NULL,
       count_1_Class        SMALLINT NOT NULL,
       count_2_Class        SMALLINT NOT NULL,
       PRIMARY KEY          (id_Aircraft),
       FOREIGN KEY          (id_Company) REFERENCES Companies  ON DELETE CASCADE		       
);

CREATE TABLE Flights (
       id_Flight            BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 30, INCREMENT BY 1, CACHE 20), 
       date_Departure       TIMESTAMP NOT NULL,
       date_Arrival         TIMESTAMP NOT NULL,
       id_Departure_City    BIGINT NOT NULL,
       id_Arrival_City      BIGINT NOT NULL,
       id_Aircraft          BIGINT NOT NULL,
       price_1_Class        DECIMAL(30,2) NOT NULL,
       price_2_Class        DECIMAL(30,2) NOT NULL,
       PRIMARY KEY          (id_Flight),
       FOREIGN KEY          (id_Departure_City) REFERENCES Cities ON DELETE CASCADE,		       
       FOREIGN KEY          (id_Arrival_City)   REFERENCES Cities ON DELETE CASCADE,		       
       FOREIGN KEY          (id_Aircraft)   REFERENCES Aircrafts ON DELETE CASCADE
);

CREATE TABLE Orders (
       id_Order             BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY (START WITH 30, INCREMENT BY 1, CACHE 20),
       id_Flight            BIGINT NOT NULL,
       class                BIGINT NOT NULL,
       count                BIGINT NOT NULL,
       credit_Card          VARCHAR(20) NOT NULL,
       PRIMARY KEY          (id_Order),
       FOREIGN KEY          (id_Flight) REFERENCES Flights ON DELETE CASCADE		       
);

INSERT INTO Cities (id_City, name_City) VALUES(1, 'Moscow');
INSERT INTO Cities (id_City, name_City) VALUES(3, 'Samara');
INSERT INTO Cities (id_City, name_City) VALUES(6, 'London');
INSERT INTO Cities (id_City, name_City) VALUES(13, 'Milan');
INSERT INTO Cities (id_City, name_City) VALUES(15, 'Tokio');
INSERT INTO Cities (id_City, name_City) VALUES(7, 'Paris');
INSERT INTO Cities (id_City, name_City) VALUES(9, 'Madrid');
INSERT INTO Cities (id_City, name_City) VALUES(10, 'Milan');
INSERT INTO Cities (id_City, name_City) VALUES(4, 'Kiev');

INSERT INTO Companies (id_Company, name_Company) VALUES(1, 'Airflot');
INSERT INTO Companies (id_Company, name_Company) VALUES(2, 'France Air Lines');
INSERT INTO Companies (id_Company, name_Company) VALUES(5, 'Italy Air Lines');
INSERT INTO Companies (id_Company, name_Company) VALUES(6, 'British Airways');

INSERT INTO Aircrafts (id_Aircraft, id_Company, model, count_1_Class, count_2_Class)
	VALUES(1, 1, 'TU-154', 56, 74);
INSERT INTO Aircrafts (id_Aircraft, id_Company, model, count_1_Class, count_2_Class)
	VALUES(2, 1, 'TU-154', 56, 74);
INSERT INTO Aircrafts (id_Aircraft, id_Company, model, count_1_Class, count_2_Class)
	VALUES(4, 2, 'Concord', 85, 58);
INSERT INTO Aircrafts (id_Aircraft, id_Company, model, count_1_Class, count_2_Class)
	VALUES(7, 5, 'Boing-747', 120, 100);
INSERT INTO Aircrafts (id_Aircraft, id_Company, model, count_1_Class, count_2_Class)
	VALUES(8, 5, 'Boing-747', 120, 100);

INSERT INTO Flights (id_Flight, date_Departure, date_Arrival, id_Departure_City,    
       id_Arrival_City, id_Aircraft, price_1_Class, price_2_Class)
       VALUES(1, TIMESTAMP('2002-05-14 05:23:45'),
		 TIMESTAMP('2002-05-15 07:23:45'),
		 1, 6, 1, 300, 200);

INSERT INTO Flights (id_Flight, date_Departure, date_Arrival, id_Departure_City,    
       id_Arrival_City, id_Aircraft, price_1_Class, price_2_Class)
       VALUES(3, TIMESTAMP('2002-05-15 05:53:15'),
		 TIMESTAMP('2002-05-15 08:03:45'),
		4, 10, 7, 350, 200);

INSERT INTO Flights (id_Flight, date_Departure, date_Arrival, id_Departure_City,    
       id_Arrival_City, id_Aircraft, price_1_Class, price_2_Class)
       VALUES(5, TIMESTAMP('2002-05-17 01:14:00'),
		 TIMESTAMP('2002-05-17 03:03:56'),
		 7, 15, 4, 1000, 700);

INSERT INTO Flights (id_Flight, date_Departure, date_Arrival, id_Departure_City,    
       id_Arrival_City, id_Aircraft, price_1_Class, price_2_Class)
       VALUES(6, TIMESTAMP('2002-05-18 5:23:45'),
		 TIMESTAMP('2002-05-19 8:29:04'),
		 4, 3, 2, 200, 100);

INSERT INTO Flights (id_Flight, date_Departure, date_Arrival, id_Departure_City,    
       id_Arrival_City, id_Aircraft, price_1_Class, price_2_Class)
       VALUES(7, TIMESTAMP('2002-05-19 4:10:00'),
		 TIMESTAMP('2002-05-19 6:55:00'),
		 6, 9, 8, 300, 220);

INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(1, 1, 1, 2, '1234567890');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(2, 1, 2, 1, '2935235353');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(3, 1, 2, 4, '5734573405');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(4, 1, 1, 7, '3530457304');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(5, 3, 1, 2, '3534534123');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(6, 3, 2, 6, '5333443645');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(7, 3, 2, 2, '4364564564');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(8, 5, 1, 34, '3534534534');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(9, 7, 1, 2, '3453453455');
INSERT INTO Orders (id_Order, id_Flight, class, count, credit_Card) 
	VALUES(10, 7, 2, 1, '534767867');
